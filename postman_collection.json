{
	"info": {
		"_postman_id": "nodejs-microservices-api",
		"name": "üöÄ Node.js Microservices API",
		"description": "Complete API collection for Node.js Express Microservices Boilerplate\n\n## Features\n- üîê Authentication & Authorization\n- üë§ User Management\n- üìß Notifications\n- üîÑ Auto token refresh\n\n## Quick Start\n1. Select the **Local** environment\n2. Run the **üîê Auth ‚Üí Register User** request\n3. Run the **üîê Auth ‚Üí Login** request (token auto-saves)\n4. Test other endpoints!\n\n**Base URL:** http://localhost:3000",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "‚úÖ Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('user_id', response.data.user._id);",
									"    pm.environment.set('user_email', response.data.user.email);",
									"    console.log('‚úÖ User registered successfully!');",
									"    console.log('üìß Email:', response.data.user.email);",
									"    console.log('üÜî User ID:', response.data.user._id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{user_name}}\",\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						},
						"description": "Register a new user account. Email verification will be sent."
					},
					"response": []
				},
				{
					"name": "üîë Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('access_token', response.data.accessToken);",
									"    pm.environment.set('user_id', response.data.user._id);",
									"    pm.environment.set('user_role', response.data.user.role);",
									"    console.log('‚úÖ Login successful!');",
									"    console.log('üîë Access token saved');",
									"    console.log('üë§ User:', response.data.user.name);",
									"    console.log('üé≠ Role:', response.data.user.role);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "Login with email and password. Returns access token and user info."
					},
					"response": []
				},
				{
					"name": "üîÑ Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('access_token', response.data.accessToken);",
									"    console.log('‚úÖ Token refreshed successfully!');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/refresh-token",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "refresh-token"]
						},
						"description": "Get a new access token using refresh token."
					},
					"response": []
				},
				{
					"name": "üö™ Logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    pm.environment.unset('access_token');",
									"    console.log('‚úÖ Logged out successfully!');",
									"    console.log('üîë Access token cleared');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "logout"]
						},
						"description": "Logout and invalidate tokens."
					},
					"response": []
				},
				{
					"name": "‚úâÔ∏è Verify Email",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/auth/verify-email?token={{verification_token}}",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "verify-email"],
							"query": [
								{
									"key": "token",
									"value": "{{verification_token}}",
									"description": "Email verification token"
								}
							]
						},
						"description": "Verify email address using token sent via email."
					},
					"response": []
				},
				{
					"name": "üîê Forgot Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{user_email}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/forgot-password",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "forgot-password"]
						},
						"description": "Request password reset email."
					},
					"response": []
				},
				{
					"name": "üîë Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{reset_token}}\",\n  \"password\": \"NewPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/reset-password",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "reset-password"]
						},
						"description": "Reset password using token from email."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints including register, login, logout, and password management."
		},
		{
			"name": "üë§ User Management",
			"item": [
				{
					"name": "üìã Get My Profile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    console.log('‚úÖ Profile retrieved');",
									"    console.log('üë§ Name:', response.data.name);",
									"    console.log('üìß Email:', response.data.email);",
									"    console.log('üé≠ Role:', response.data.role);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile"]
						},
						"description": "Get current user profile information."
					},
					"response": []
				},
				{
					"name": "‚úèÔ∏è Update Profile",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "profile"]
						},
						"description": "Update current user profile."
					},
					"response": []
				},
				{
					"name": "üîí Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"{{user_password}}\",\n  \"newPassword\": \"NewSecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/change-password",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "change-password"]
						},
						"description": "Change current user password."
					},
					"response": []
				},
				{
					"name": "üë• Get All Users (Admin)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users?page=1&limit=10",
							"host": ["{{base_url}}"],
							"path": ["api", "users"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "role",
									"value": "user",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Get all users (admin only). Supports pagination and filtering."
					},
					"response": []
				},
				{
					"name": "üîç Get User By ID (Admin)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}"]
						},
						"description": "Get specific user by ID (admin only)."
					},
					"response": []
				},
				{
					"name": "‚ùå Delete User (Admin)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}"]
						},
						"description": "Delete user account (admin only)."
					},
					"response": []
				}
			],
			"description": "User management endpoints for profile, password, and admin operations."
		},
		{
			"name": "üìß Notifications",
			"item": [
				{
					"name": "üì¨ Get My Notifications",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/notifications?page=1&limit=20&unreadOnly=false",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "unreadOnly",
									"value": "false"
								}
							]
						},
						"description": "Get user notifications with pagination."
					},
					"response": []
				},
				{
					"name": "‚úÖ Mark as Read",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/notifications/{{notification_id}}/read",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", "{{notification_id}}", "read"]
						},
						"description": "Mark notification as read."
					},
					"response": []
				},
				{
					"name": "‚úÖ Mark All as Read",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/notifications/read-all",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", "read-all"]
						},
						"description": "Mark all notifications as read."
					},
					"response": []
				},
				{
					"name": "üóëÔ∏è Delete Notification",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/notifications/{{notification_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", "{{notification_id}}"]
						},
						"description": "Delete a notification."
					},
					"response": []
				},
				{
					"name": "üì§ Send Email (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"to\": \"user@example.com\",\n  \"subject\": \"Test Email\",\n  \"template\": \"generic\",\n  \"data\": {\n    \"title\": \"Hello!\",\n    \"message\": \"This is a test email from the notification service.\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/notifications/send-email",
							"host": ["{{base_url}}"],
							"path": ["api", "notifications", "send-email"]
						},
						"description": "Send email notification (admin only)."
					},
					"response": []
				}
			],
			"description": "Notification management endpoints for emails and in-app notifications."
		},
		{
			"name": "üè• Health & Status",
			"item": [
				{
					"name": "üíö API Gateway Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						},
						"description": "Check API Gateway health status."
					},
					"response": []
				},
				{
					"name": "üîê Auth Service Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3001/health",
							"protocol": "http",
							"host": ["localhost"],
							"port": "3001",
							"path": ["health"]
						},
						"description": "Check Auth Service health status."
					},
					"response": []
				},
				{
					"name": "üë§ User Service Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3002/health",
							"protocol": "http",
							"host": ["localhost"],
							"port": "3002",
							"path": ["health"]
						},
						"description": "Check User Service health status."
					},
					"response": []
				},
				{
					"name": "üìß Notification Service Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:3003/health",
							"protocol": "http",
							"host": ["localhost"],
							"port": "3003",
							"path": ["health"]
						},
						"description": "Check Notification Service health status."
					},
					"response": []
				}
			],
			"description": "Health check endpoints for all services."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// üîß Pre-request script runs before each request",
					"console.log('üöÄ Sending request to:', pm.request.url);",
					"",
					"// Check if access token exists for protected routes",
					"if (pm.request.headers.has('Authorization')) {",
					"    const token = pm.environment.get('access_token');",
					"    if (!token) {",
					"        console.warn('‚ö†Ô∏è No access token found. Please login first.');",
					"    }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// üß™ Test script runs after each request",
					"const response = pm.response.json();",
					"",
					"// Log response status",
					"if (pm.response.code >= 200 && pm.response.code < 300) {",
					"    console.log('‚úÖ Request successful:', pm.response.code);",
					"} else if (pm.response.code >= 400) {",
					"    console.error('‚ùå Request failed:', pm.response.code);",
					"    console.error('Error:', response.message || 'Unknown error');",
					"}",
					"",
					"// Log response time",
					"console.log('‚è±Ô∏è Response time:', pm.response.responseTime + 'ms');"
				]
			}
		}
	],
	"variable": []
}
